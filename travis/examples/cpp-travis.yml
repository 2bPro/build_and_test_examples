language: cpp

addons:
  apt:
    packages:
    - xsltproc

before_install:
  - wget http://dev-www.libreoffice.org/src/cppunit-1.13.2.tar.gz
  - tar -xvzf cppunit-1.13.2.tar.gz
  - cd cppunit-1.13.2
  - ./configure --prefix=$TRAVIS_BUILD_DIR
  - make
  - make install
  - cd ..
  - ls -R $TRAVIS_BUILD_DIR/include
  - ls -R $TRAVIS_BUILD_DIR/lib
  - ls -R $TRAVIS_BUILD_DIR/share
  - ls -R $TRAVIS_BUILD_DIR/bin
  - wget https://googletest.googlecode.com/files/gtest-1.7.0.zip
  - unzip gtest-1.7.0.zip 
  - cd gtest-1.7.0/
  - ./configure --prefix=$TRAVIS_BUILD_DIR --with-pthreads=no
  - make
  - cp -r include/gtest $TRAVIS_BUILD_DIR/include
  - cp lib/.libs/* $TRAVIS_BUILD_DIR/lib/
  - cd ..
  - ls -R $TRAVIS_BUILD_DIR/include
  - ls -R $TRAVIS_BUILD_DIR/lib
  - ls -R $TRAVIS_BUILD_DIR/share
  - ls -R $TRAVIS_BUILD_DIR/bin
  - export CPLUS_INCLUDE_PATH=$TRAVIS_BUILD_DIR/include:$CPLUS_INCLUDE_PATH
  - export LIBRARY_PATH=$TRAVIS_BUILD_DIR/lib:$LIBRARY_PATH
  - export LD_LIBRARY_PATH=$TRAVIS_BUILD_DIR/lib:$LD_LIBRARY_PATH
  - cd cpp

script:
  - make runcppunittests
  - cat TestResults.xml 
  - make rungoogletests
  - cat TestResults.xml 
